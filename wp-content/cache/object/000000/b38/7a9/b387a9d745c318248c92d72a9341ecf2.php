=¹ÞU<?php exit; ?>a:1:{s:7:"content";O:8:"stdClass":23:{s:2:"ID";s:3:"188";s:11:"post_author";s:1:"1";s:9:"post_date";s:19:"2015-07-10 17:57:13";s:13:"post_date_gmt";s:19:"2015-07-10 12:27:13";s:12:"post_content";s:9933:"<p>Hey folks. We have created a simple blog using php and mysql earlier. Today we will create login and logout system for the blog. We will add facebook and google login also in a later tutorial.</p>
<p>[button colour="lightblue" type="squarearrow" size="large" link="http://demo.webtutplus.com/login/login_part2.php" target="_blank"]Demo[/button]</p>
<p>[button colour="limegreen" type="squarearrow" size="large" link="http://demo.webtutplus.com/login.zip" target="_blank"]Download Source[/button]</p>
<h2>Step 1:- create basic html form.</h2>
<hr />
<p>We willl create three pages. The main page will have the registration and login form. If the user can login successfully, he will be redirected into success page otherwise an error page.</p>
<p>The main page will have two form one for registration and one for login. We will add simple html5 validation.</p>
<p>Here is the sample html code</p>
<pre class="prettyprint lang-html"><!DOCTYPE html>

<html>

<head>

	

	 <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css"

    rel="stylesheet">

  



</head>

<body>



	<div class="container">

			

		<div class="row">

			<div class="col-sm-6">

				<h1> Login  Here </h1>

				<form action="" method="post">

				  <div class="form-group">

				    <label for="exampleInputEmail1">Email address</label>

				    <input type="email" name="email" class="form-control" id="exampleInputEmail1" placeholder="Email" required>

				  </div>

				  <div class="form-group">

				    <label for="exampleInputPassword1" name="pass">Password</label>

				    <input type="password" class="form-control" id="exampleInputPassword1" placeholder="Password" required>

				  </div>

			

				  <button type="submit" class="btn btn-success" name="login">Login</button>

				</form>

			</div>

			<div class="col-sm-6">

				<h1> Register  Here </h1>

				<form action="" method="post">

				  <div class="form-group">

				    <label for="exampleInputEmail1">Email address</label>

				    <input type="email" name="email" class="form-control" id="exampleInputEmail1" placeholder="Email" required>

				  </div>

				  <div class="form-group">

				    <label for="exampleInputPassword1">Password</label>

				    <input type="password" name="pass1" class="form-control" id="exampleInputPassword1" placeholder="Password" required>

				  </div>

				   <div class="form-group">

				    <label for="exampleInputPassword1">Password</label>

				    <input type="password" name="pass2" class="form-control" id="exampleInputPassword1" placeholder="Password" required>

				  </div>

			

				  <button type="submit" class="btn btn-info" name="register">Register</button>

				</form>

			</div>

		</div>





	</div>





</body>

</html>


</pre>
<p>I have given name to each input field to identify easily.</p>
<p><a href="http://webtutplus.com/wp-content/uploads/2015/07/login_1.png"><img src="http://webtutplus.com/wp-content/uploads/2015/07/login_1-1024x518.png" alt="login_1" width="1024" height="518" class="alignnone size-large wp-image-196" /></a></p>
<h2>step2:- Create user table to store user information</h2>
<hr />
<p>Open localhost/phpmyadmin, then create a blog databse and user table. Add email and password field.</p>
<pre class="prettyprint lang-mysql">CREATE TABLE `user` ( `user_id` INT(11) NOT NULL AUTO_INCREMENT , `email` VARCHAR(200) NOT NULL , `password` VARCHAR(200) NOT NULL  , PRIMARY KEY (`user_id`)  ) ENGINE = InnoDB;<span id="mce_marker" data-mce-type="bookmark">â€‹</span></pre>
<h2>Step 3:- Registration</h2>
<hr />
<p>&nbsp;</p>
<p>Now we will add action to the registration form. When submitted the form and if the password field and confirm password field match, we will register the user , provided the email does not exists in database already.</p>
<p>We have to show error message in following cases.</p>
<p>a) Passwords does not match.</p>
<p>b) email already registered.</p>
<p>Lets submit the form and catch the submitted form in php. I have commented php code to explain whats going on. I think you will be able to follow easily. Â I am checking above cases and printing suitable message.</p>
<pre class="prettyprint lang-php"><?php 

	$result=mysql_connect( 'localhost','root','')or die("cannot connect");

	if (!$result) {

		return false;

	}

	if (!mysql_select_db('blog',$result)){

		return false;

	}

	$conn= $result;





	if(isset($_POST['register'])){

		// clean strings and escape unwanted charecter by mysql_escape_string 

		$email = mysql_escape_string($_POST['email']); 

		$password1 = mysql_real_escape_string($_POST['pass1']);

		$password2 = mysql_real_escape_string($_POST['pass2']);

		$msg = '';

		$flag = 0;

		if(strcmp($password1, $password2)){

			$msg = "Passwords does not match";

			$flag = 1; // set flag = 1; if password does not match 

		}



		$sql = "SELECT * FROM user where email = '$email' "; // check email exists or not

		$result = mysql_query($sql,$conn);

		$rowcount=mysql_num_rows($result);

		if($rowcount >= 1){

			// means there is an entry in database with same email.

			$msg = "email alredy exists";

			$flag = 1; // set flag = 1 , if user already exits 

		}

		if($flag == 0){

			// means password matches and email doesnot exist in database 

			// make a new entry in database 



			$sql = "INSERT INTO `user`(`email`, `password`) VALUES ('$email','$password1')";

			if($result = mysql_query($sql,$conn)){

				$msg = "USER registered succesfully";

			}



		}

	}

?></pre>
<p>Here is the sample html code to check if message is set or not. If message variable is set then display it accordingly.</p>
<pre class="prettyprint lang-html"><div class="row">

			<h2 class="bg-info">

				<?php if(isset($msg)){

					echo $msg;

					} ?>

			</h2>

		</div></pre>
<h2>Step 3 :- LoginÂ </h2>
<hr />
<p>&nbsp;</p>
<p>When the login form is submitted, we will check if email exist in database or not. If email exists we will check whether password is correct or not. If both password and email are correct, we will take user to a new protected page,else we will display the error. Simple right ?</p>
<pre class="prettyprint lang-php">if(isset($_POST['login'])){

		$email = mysql_escape_string($_POST['email']); 

		$pass = mysql_real_escape_string($_POST['password']);



		$msg = "";

		$sql = "SELECT * FROM user where email = '$email' and password = '$pass' "; 

		// check email and password are correct or not

		$result = mysql_query($sql,$conn);

		$rowcount=mysql_num_rows($result);

		if($rowcount == 0){

			// means either email does not exist or password is wrong  

			$msg = "Invalid credentials";

			 

		}else{

			// Start the session

			session_start();

			// Set session variables

			$_SESSION["email"] = $email;



			//echo $_SESSION["email"];

			// go to protected success page

			header('Location: success.php');

		}



	}</pre>
<h2>Step 4:- Create password protectecd success.php page.</h2>
<hr />
<p>&nbsp;</p>
<p>Now we will create the success page. We have to make sure this page is only availble for logged in user.</p>
<p>If user is not logged in , redirect him to home page.</p>
<pre class="prettyprint lang-html"><!DOCTYPE html>

<html>

<head>

	

	 <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css"

    rel="stylesheet">

  <?php 

  		// Start the session

		session_start();

  		if(!isset($_SESSION["email"])){

  			// if session email variable is not set

  			// redirect user to login/register page



  			header('Location: login_part2.php');

  		}

  ?>



</head>

<body>

	<div class="container">

		<h2 class="bg-success"> Login Succesful </h2>

		<p class="bg-info">



			Welcome <?php

			// user is logged in 

			// lets show his/her email

			 echo  $_SESSION["email"]; 

			?>

		</p>



	</div>





</body>

</html></pre>
<p><a href="http://webtutplus.com/wp-content/uploads/2015/07/login_2.png"></a></p>
<p><a href="http://webtutplus.com/wp-content/uploads/2015/07/login_2.png"><img src="http://webtutplus.com/wp-content/uploads/2015/07/login_2-1024x518.png" alt="login_2" width="1024" height="518" class="alignnone size-large wp-image-197" /></a></p>
<h2>Step 5:- Logout the userÂ </h2>
<hr />
<p>We have to start_session, unset all session variable and then destroy session . That is all required for logout.</p>
<p>Add this code in success.php to logout.</p>
<pre class="prettyprint lang-html"><p> Click <a href="logout.php" > Here </a> to log out </p></pre>
<p>now make a logout.php file and add the following snippet.</p>
<pre class="prettyprint lang-html"><!DOCTYPE html>

<html>

<head>

	

	 <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css"

    rel="stylesheet">

  <?php 

  		// Start the session

  		session_start();



  		// unset all seasson variable 

		session_unset(); 



		// destroy the session 

		session_destroy(); 

  ?>



</head>

<body>

	<div class="container">

		<h2 class="bg-danger"> Logout  Succesful </h2>

		



		<p> Click <a href="login_part2.php" > Here </a> to go to home page </p>



	</div>





</body>

</html></pre>
<p><a href="http://webtutplus.com/wp-content/uploads/2015/07/login_3.png"><img src="http://webtutplus.com/wp-content/uploads/2015/07/login_3-1024x518.png" alt="login_3" width="1024" height="518" class="alignnone size-large wp-image-198" /></a></p>
<p>Thats all for logout. So now you can register , login go to a screat password protected page and log yourself out. Cool right?</p>
";s:10:"post_title";s:33:"Create login system for your blog";s:12:"post_excerpt";s:0:"";s:11:"post_status";s:7:"publish";s:14:"comment_status";s:4:"open";s:11:"ping_status";s:4:"open";s:13:"post_password";s:0:"";s:9:"post_name";s:33:"create-login-system-for-your-blog";s:7:"to_ping";s:0:"";s:6:"pinged";s:0:"";s:13:"post_modified";s:19:"2015-07-25 19:33:48";s:17:"post_modified_gmt";s:19:"2015-07-25 14:03:48";s:21:"post_content_filtered";s:0:"";s:11:"post_parent";s:1:"0";s:4:"guid";s:28:"http://webtutplus.com/?p=188";s:10:"menu_order";s:1:"0";s:9:"post_type";s:4:"post";s:14:"post_mime_type";s:0:"";s:13:"comment_count";s:1:"0";}}